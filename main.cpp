#include <iostream>
#include <iomanip>
#include <iio.h>
//#include <memory>
//#include "dev_context.hxx"
//#include <vector>

//#include "thread.hxx"
//#include <thread>

using namespace std;

int main() {

//    auto ctx = std::make_shared<dev_context>();
//    auto soc_adc_val = ctx->create_channel("48003000.adc:adc@0", "voltage6", [](auto value) {
//        return 3.3 * (uint16_t(value) / 65535.);
//    });
//    auto ina220_cur = ctx->create_channel("ina220", "current3", [](auto value) {
//        return value / 180.;
//    });
//    auto ina220_vol = ctx->create_channel("ina220", "voltage1", [](auto value) {
//       return  value / 2000.;
//    });
//
//    ctx->fetch_all([](const vector<float>&& values) {
////        cout << "{";
////        for(const auto& val : values) {
////            cout << fixed << setprecision(2) << val << ", ";
////        }
////        cout << "}" << endl;
//
//    });
//
//    for(;;);
    return 0;
}
